#
# General configuration
#
config:
  results_dir: ../results
  materialize_to: ./test-apps-materialized.yml
  trace:
    # one benchmark at once to not stress the GPU
    concurrency: 1
    # tracing does not require multiple repetitions
    repetitions: 1
  accelsim_trace:
    # one benchmark at once to not stress the GPU
    concurrency: 1
    # tracing does not require multiple repetitions
    repetitions: 1
  profile:
    # one benchmark at once to not stress the GPU
    concurrency: 1
    # profile 5 repetitions to warm up the GPU
    repetitions: 5
    keep_log_file: true
  # for simulation, we do not set a limit on concurrency
  simulate:
    repetitions: 2
  # for accelsim simulation, we do not set a limit on concurrency
  accelsim_simulate:
    repetitions: 2
#
# Benchmarks
#
benchmarks:
  vectorAdd:
    path: ./vectoradd
    executable: vectoradd
    inputs:
      data_type: [32]
      length: [100, 1000, 10000]
    args: "{{ input.length }} {{ input.data_type }}"
    # profile:
    # log_file: "./results/{{ bench.name }}/{{ bench.name }}-{{length}}-{{data_type}}/nvprof.log"
    # log_file: "./results/vectorAdd/vectorAdd-32-100/nvprof.log"
    # metrics_file: "./results/vectorAdd/vectorAdd-32-100/metrics.json"
  simple_matrixmul:
    path: ./simple_matrixmul
    executable: matrixmul
    inputs:
      data_type: [32]
      m: [32, 64, 128]
      n: [32, 64, 128]
      p: [32, 64, 128]
    # (m x n) x (n x p)
    args: "{{ input.m }} {{ input.n }} {{ input.p }} {{ input.data_type }}"
